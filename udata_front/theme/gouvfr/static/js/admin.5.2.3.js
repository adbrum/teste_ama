import{defineComponent as q,openBlock as c,createElementBlock as h,Fragment as B,createVNode as n,mergeProps as me,createElementVNode as t,toDisplayString as o,unref as e,renderSlot as H,normalizeClass as te,ref as k,onMounted as le,createBlock as S,withCtx as u,createCommentVNode as R,computed as I,createTextVNode as g,renderList as E,readonly as Be,watchEffect as K,resolveComponent as F,watchPostEffect as Pe,Teleport as re,withModifiers as ne,createApp as Oe}from"vue";import{B as ie,u as M,x as V,bv as Ie,F as N,_ as X,b as _e,bw as Fe,e as pe,aj as W,y as Z,J as L,z as Le,D as j,be as x,bx as Ue,by as je,at as be,bi as He,bz as de,bA as Ve,bB as Ee,bC as Ne,ao as We,K as se,ab as Ye,bD as Je,bE as Ze,b9 as Ke,bF as Qe,bG as Ae,aV as Xe,V as Q,a5 as xe,aS as Ce,bH as Ge,au as et,X as ue,$ as tt,bI as st,bJ as ot,aI as at,bK as nt,bL as lt,bM as ge,bN as rt,bO as it,bP as dt,bQ as Se,bR as ut,bS as ct,v as ft,A as mt,bd as _t,bT as pt,bU as bt,bg as vt,a as oe,bV as gt,bW as ht,bX as yt,bY as $t,a6 as De,bZ as wt,b_ as kt,b$ as Re,c0 as zt,c1 as At,aq as Ct,bk as St,bn as fe,aU as Dt,bo as Rt,bp as qt,bq as Tt,c2 as Mt,c3 as Bt,br as Pt,bs as Ot,bt as It}from"./sentry.5.2.3.js";import"vue-content-loader";import"./_commonjsHelpers.5.2.3.js";function fl(){import.meta.url,import("_").catch(()=>1);async function*_(){}}const Ft={class:"fr-ml-1v fr-text--bold"},Lt=q({__name:"AvatarWithName",props:{user:{},size:{default:12}},setup(_){return(s,a)=>(c(),h(B,null,[n(ie,me(s.$attrs,{user:s.user,size:s.size,rounded:!0}),null,16,["user","size"]),t("span",Ft,o(s.user.first_name)+" "+o(s.user.last_name),1)],64))}}),Ut=["aria-label"],jt={class:"fr-breadcrumb__list"},Y={__name:"Breadcrumb",setup(_){const{t:s}=M();return(a,b)=>(c(),h("nav",{rol:"navigation","aria-label":e(s)("You're here:"),class:"fr-breadcrumb fr-mb-5v"},[t("ol",jt,[H(a.$slots,"default")])],8,Ut))}},Ht={class:"fr-text--sm fr-my-0"},Vt={class:"fr-grid-row fr-grid-row--right not-enlarged"},Et=["href","title"],Nt=q({__name:"QualityScoreTooltipContent",props:{dataset:{}},setup(_){const{t:s}=M();return(a,b)=>(c(),h(B,null,[t("h5",Ht,o(e(s)("Metadata quality:")),1),n(e(V),{passed:a.dataset.quality.dataset_description_quality,messagePassed:e(s)("Data description filled"),messageFailed:e(s)("Data description empty"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),n(e(V),{passed:a.dataset.quality.resources_documentation,messagePassed:e(s)("Files documented"),messageFailed:e(s)("Files documentation missing"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),n(e(V),{passed:a.dataset.quality.license,messagePassed:e(s)("License filled"),messageFailed:e(s)("No license set"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),n(e(V),{passed:a.dataset.quality.update_frequency&&!!a.dataset.quality.update_fulfilled_in_time,messagePassed:e(s)("Update frequency followed"),messageFailed:a.dataset.quality.update_frequency?e(s)("Update frequency not followed"):e(s)("Update frequency not set"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),n(e(V),{passed:a.dataset.quality.has_open_format,messagePassed:e(s)("File formats are open"),messageFailed:e(s)("File formats are closed"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),n(e(V),{passed:a.dataset.quality.temporal_coverage,messagePassed:e(s)("Temporal coverage filled"),messageFailed:e(s)("Temporal coverage not set"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),n(e(V),{passed:a.dataset.quality.spatial,messagePassed:e(s)("Spatial coverage filled"),messageFailed:e(s)("Spatial coverage not set"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),n(e(V),{passed:a.dataset.quality.all_resources_available,messagePassed:e(s)("All files are available"),messageFailed:e(s)("Some files are unavailable"),class:"fr-my-1w"},null,8,["passed","messagePassed","messageFailed"]),t("div",Vt,[t("a",{href:e(Ie),target:"_blank",rel:"noopener",title:e(s)("Learn more about this indicator - opens a new window")},o(e(s)("Learn more about this indicator")),9,Et)])],64))}}),ae=q({__name:"AdminBadge",props:{type:{}},setup(_){return(s,a)=>(c(),h("p",{class:te(["fr-badge",{"fr-badge--blue-cumulus":s.type==="info","fr-badge--error fr-badge--no-icon":s.type==="error","fr-badge--warning fr-badge--no-icon":s.type==="warning","fr-badge--success fr-badge--no-icon":s.type==="success"}])},[H(s.$slots,"default")],2))}}),Wt=["aria-describedby"],Yt=["id"],Jt=q({inheritAttrs:!1,__name:"AdminContentWithTooltip",setup(_){const s=N(),a=k(),b=k("");return le(()=>{a.value&&(b.value=a.value.textContent||"")}),(d,r)=>(c(),h(B,null,[t("p",me(d.$attrs,{"aria-describedby":e(s),ref_key:"contentRef",ref:a}),[H(d.$slots,"default",{},void 0,!0)],16,Wt),t("span",{class:"fr-hidden-xl fr-tooltip fr-placement",id:e(s),role:"tooltip","aria-hidden":"true"},o(b.value),9,Yt)],64))}});const ce=X(Jt,[["__scopeId","data-v-d192f17a"]]),qe=q({__name:"AdminLoader",props:{scale:{default:4}},setup(_){return _e(Fe),(s,a)=>(c(),S(e(pe),{name:"ri-loader-5-line",animation:"spin",scale:s.scale,fill:"var(--blue-cumulus-sun-368-moon-732)"},null,8,["scale"]))}}),Zt={class:"fr-table fr-mb-2w"},Kt=q({__name:"AdminTable",props:{loading:{type:Boolean,default:!1}},setup(_){return(s,a)=>(c(),h("div",Zt,[t("table",null,[H(s.$slots,"default",{},void 0,!0)]),s.loading?(c(),S(W,{key:0,class:"fr-p-4w text-align-center"},{default:u(()=>[n(qe)]),_:1})):R("",!0)]))}});const G=X(Kt,[["__scopeId","data-v-cae574a4"]]),Qt={class:"fr-text--bold"},Xt={key:1,class:"fr-grid-row fr-grid-row--middle justify-between"},xt=["title"],Gt=q({__name:"AdminTableTh",props:{sorted:{}},emits:["sort"],setup(_,{emit:s}){const a=_,b=s,{t:d}=M(),r=I(()=>a.sorted!==void 0);function l(){return a.sorted==="desc"?b("sort","asc"):b("sort","desc")}return(i,f)=>(c(),h("th",Qt,[r.value?(c(),h("div",Xt,[H(i.$slots,"default",{},void 0,!0),t("button",{class:te(["fr-ml-1w fr-btn fr-btn--sm fr-btn--tertiary-no-outline",{"fr-icon-arrow-down-line":!i.sorted||i.sorted==="asc","fr-icon-arrow-up-line":i.sorted==="desc","text-grey-500":i.sorted,"text-mention-grey":!i.sorted}]),onClick:l,title:e(d)("Sort")},o(e(d)("Sort")),11,xt)])):H(i.$slots,"default",{key:0},void 0,!0)]))}});const D=X(Gt,[["__scopeId","data-v-5acf0bf0"]]),es=["aria-describedby"],ts=["id"],U=q({__name:"Tooltip",setup(_){const s=N("tooltip");return(a,b)=>(c(),h(B,null,[t("p",me(a.$attrs,{"aria-describedby":e(s)}),[H(a.$slots,"default")],16,es),t("span",{class:"fr-tooltip fr-placement",id:e(s),role:"tooltip","aria-hidden":"true"},[H(a.$slots,"tooltip")],8,ts)],64))}}),ss=["href"],os={class:"monospace"},as={class:"monospace"},ns={class:"monospace"},ls={class:"monospace"},rs={class:"monospace"},is=q({__name:"AdminDatasetsTable",props:{datasets:{},loading:{type:Boolean},sortDirection:{},sortedBy:{}},emits:["sort"],setup(_,{emit:s}){const a=s,b=_,{t:d}=M();function r(p,v){a("sort",p,v)}function l(p){return b.sortedBy===p?b.sortDirection:null}function i(p){return Array.isArray(p.resources)?p.resources.length:p.resources.total}function f(p){return"".concat(x,"dataset/").concat(p.id,"/")}function z(p){return p.deleted?{label:d("Deleted"),type:"error"}:p.archived?{label:d("Archived"),type:"warning"}:p.private?{label:d("Private"),type:"default"}:{label:d("Public"),type:"info"}}return(p,v)=>(c(),S(G,{loading:p.loading},{default:u(()=>[t("thead",null,[t("tr",null,[n(D,{onSort:v[0]||(v[0]=m=>r("title",m)),sorted:l("title"),scope:"col"},{default:u(()=>[g(o(e(d)("Title of the dataset")),1)]),_:1},8,["sorted"]),n(D,{scope:"col"},{default:u(()=>[g(o(e(d)("Status")),1)]),_:1}),n(D,{onSort:v[1]||(v[1]=m=>r("created",m)),sorted:l("created"),scope:"col"},{default:u(()=>[g(o(e(d)("Created at")),1)]),_:1},8,["sorted"]),n(D,{onSort:v[2]||(v[2]=m=>r("last_update",m)),sorted:l("last_update"),scope:"col"},{default:u(()=>[g(o(e(d)("Updated at")),1)]),_:1},8,["sorted"]),n(D,{scope:"col"},{default:u(()=>[g(o(e(d)("Files")),1)]),_:1}),n(D,{scope:"col"},{default:u(()=>[g(o(e(d)("Score")),1)]),_:1}),n(D,{scope:"col"},{default:u(()=>[n(U,null,{tooltip:u(()=>[g(o(e(d)("Discussions")),1)]),default:u(()=>[v[6]||(v[6]=t("span",{class:"fr-icon--sm fr-icon-chat-3-line","aria-hidden":"true"},null,-1))]),_:1})]),_:1}),n(D,{onSort:v[3]||(v[3]=m=>r("views",m)),sorted:l("views"),scope:"col"},{default:u(()=>[n(U,null,{tooltip:u(()=>[g(o(e(d)("Views")),1)]),default:u(()=>[v[7]||(v[7]=t("span",{class:"fr-icon--sm fr-icon-eye-line","aria-hidden":"true"},null,-1))]),_:1})]),_:1},8,["sorted"]),n(D,{scope:"col"},{default:u(()=>[n(U,null,{tooltip:u(()=>[g(o(e(d)("Downloads")),1)]),default:u(()=>[v[8]||(v[8]=t("span",{class:"fr-icon--sm fr-icon-download-line","aria-hidden":"true"},null,-1))]),_:1})]),_:1}),n(D,{onSort:v[4]||(v[4]=m=>r("reuses",m)),sorted:l("reuses"),scope:"col"},{default:u(()=>[n(U,null,{tooltip:u(()=>[g(o(e(d)("Reuses")),1)]),default:u(()=>[v[9]||(v[9]=t("span",{class:"fr-icon--sm fr-icon-line-chart-line","aria-hidden":"true"},null,-1))]),_:1})]),_:1},8,["sorted"]),n(D,{onSort:v[5]||(v[5]=m=>r("followers",m)),sorted:l("followers"),scope:"col"},{default:u(()=>[n(U,null,{tooltip:u(()=>[g(o(e(d)("Favorites")),1)]),default:u(()=>[v[10]||(v[10]=t("span",{class:"fr-icon--sm fr-icon-star-s-line","aria-hidden":"true"},null,-1))]),_:1})]),_:1},8,["sorted"])])]),t("tbody",null,[(c(!0),h(B,null,E(p.datasets,m=>{var $;return c(),h("tr",{key:m.id},[t("td",null,[n(ce,null,{default:u(()=>[t("a",{class:"fr-link fr-reset-link",href:f(m)},[n(e(Z),{text:m.title,"auto-resize":!0,"max-lines":2},null,8,["text"])],8,ss)]),_:2},1024)]),t("td",null,[n(ae,{type:z(m).type},{default:u(()=>[g(o(z(m).label),1)]),_:2},1032,["type"])]),t("td",null,o(e(L)(m.created_at)),1),t("td",null,o(e(L)(m.last_modified)),1),t("td",null,o(i(m)),1),t("td",null,[n(U,null,{tooltip:u(()=>[n(Nt,{dataset:m},null,8,["dataset"])]),default:u(()=>[n(e(Le),{class:"w-100",score:m.quality.score},null,8,["score"])]),_:2},1024)]),t("td",os,o(e(j)(m.metrics.discussions)),1),t("td",as,o(e(j)(m.metrics.views)),1),t("td",ns,o(e(j)(($=m.metrics.resources_downloads)!=null?$:0)),1),t("td",ls,o(e(j)(m.metrics.reuses)),1),t("td",rs,o(e(j)(m.metrics.followers)),1)])}),128))])]),_:1},8,["loading"]))}}),he=k(null);function J(){const _=s=>{he.value=s};return{currentOrganization:Be(he),setCurrentOrganization:_}}const ds="/_themes/gouvfr/assets/logotype-white.svg",us=["href"],cs=["src","alt"],ve=q({__name:"AdminPublishButton",props:{type:{}},setup(_){const s=_,{t:a}=M(),b=I(()=>{switch(s.type){case"dataset":return je;case"harvester":return"".concat(x,"harvester/new/");case"reuse":return Ue}});return(d,r)=>(c(),h("a",{href:b.value,class:"fr-btn fr-icon-add-line fr-btn--icon-left"},[g(o(e(a)("Publish on"))+" ",1),t("img",{class:"fr-ml-1v",src:e(ds),loading:"lazy",alt:e(be)},null,8,cs)],8,us))}}),fs={key:0},ms={class:"fr-breadcrumb__link","aria-current":"page"},_s={class:"fr-h3 fr-mb-5v"},ps={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle"},bs={class:"fr-col"},vs={class:"subtitle subtitle--uppercase fr-m-0"},gs={key:0,class:"fr-col-auto fr-grid-row fr-grid-row--middle"},hs=["href"],ys={class:"text-align-center fr-py-1w"},$s=["src"],ws={class:"fr-text--bold fr-my-3v"},ye=q({__name:"Datasets",props:{oid:{}},setup(_){const{t:s}=M(),a=_,b=k([]),d=k(!1),r=k(1),l=k(10),i=k(0),f=k("created"),z=k("desc"),p=I(()=>"".concat(z.value==="asc"?"":"-").concat(f.value)),v=k(""),m=He(v,Ye),{currentOrganization:$}=J(),y=de();function A(w,C){f.value=w,z.value=C}return K(async()=>{d.value=!0,b.value=[];try{let w;if(a.oid)w=await Ve(a.oid,m.value,r.value,l.value,p.value);else if(y.value)w=await Ee(y.value.id,m.value,r.value,l.value,p.value);else return;b.value=w.data,r.value=w.page,l.value=w.page_size,i.value=w.total}finally{d.value=!1}}),(w,C)=>{const T=F("router-link");return c(),h("div",null,[n(Y,null,{default:u(()=>[t("li",null,[n(T,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(s)("Administration")),1)]),_:1})]),e($)?(c(),h("li",fs,[n(T,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e($).name),1)]),_:1})])):R("",!0),t("li",null,[t("a",ms,o(e(s)("Datasets")),1)])]),_:1}),t("h1",_s,o(e(s)("Datasets")),1),t("div",ps,[t("div",bs,[t("h2",vs,o(e(s)("{n} datasets",i.value)),1)]),i.value&&w.oid?(c(),h("div",gs,[t("div",null,[t("a",{href:e(Ne)(w.oid),class:"fr-btn fr-btn--sm fr-icon-download-line fr-btn--icon-left"},o(e(s)("Download catalog")),9,hs)])])):R("",!0)]),d.value||i.value>0?(c(),S(is,{key:0,datasets:b.value,loading:d.value,"sort-direction":z.value,sortedBy:f.value,onSort:A},null,8,["datasets","loading","sort-direction","sortedBy"])):(c(),S(W,{key:1,class:"fr-my-2w"},{default:u(()=>[t("div",ys,[t("img",{src:e(We),alt:"",loading:"lazy"},null,8,$s),t("p",ws,o(e(s)("You haven't published a dataset yet")),1),n(ve,{type:"dataset"})])]),_:1})),i.value>l.value?(c(),S(e(se),{key:2,page:r.value,"page-size":l.value,"total-results":i.value,onChange:C[0]||(C[0]=P=>r.value=P)},null,8,["page","page-size","total-results"])):R("",!0)])}}}),ks=["href"],zs={class:"monospace"},As={class:"monospace"},Cs={class:"monospace"},Ss={class:"monospace"},Ds=q({__name:"AdminReusesTable",props:{reuses:{},loading:{type:Boolean},sortedBy:{},sortDirection:{}},emits:["sort"],setup(_){const s=_,{t:a}=M();function b(l){return s.sortedBy===l?s.sortDirection:null}function d(l){return"".concat(x,"reuse/").concat(l.id,"/")}function r(l){return l.deleted?{label:a("Deleted"),type:"error"}:l.archived?{label:a("Archived"),type:"warning"}:l.private?{label:a("Private"),type:"default"}:{label:a("Public"),type:"info"}}return(l,i)=>(c(),S(G,{loading:l.loading},{default:u(()=>[t("thead",null,[n(D,{onSort:i[0]||(i[0]=f=>l.$emit("sort","title",f)),sorted:b("title"),scope:"col"},{default:u(()=>[g(o(e(a)("Reuse title")),1)]),_:1},8,["sorted"]),n(D,null,{default:u(()=>[g(o(e(a)("Status")),1)]),_:1}),n(D,{onSort:i[1]||(i[1]=f=>l.$emit("sort","created",f)),sorted:b("created"),scope:"col"},{default:u(()=>[g(o(e(a)("Created at")),1)]),_:1},8,["sorted"]),n(D,{onSort:i[2]||(i[2]=f=>l.$emit("sort","datasets",f)),sorted:b("datasets"),scope:"col"},{default:u(()=>[g(o(e(a)("Datasets")),1)]),_:1},8,["sorted"]),n(D,{scope:"col"},{default:u(()=>[n(U,null,{tooltip:u(()=>[g(o(e(a)("Discussions")),1)]),default:u(()=>[i[5]||(i[5]=t("span",{class:"fr-icon--sm fr-icon-chat-3-line","aria-hidden":"true"},null,-1))]),_:1})]),_:1}),n(D,{onSort:i[3]||(i[3]=f=>l.$emit("sort","views",f)),sorted:b("views"),scope:"col"},{default:u(()=>[n(U,null,{tooltip:u(()=>[g(o(e(a)("Views")),1)]),default:u(()=>[i[6]||(i[6]=t("span",{class:"fr-icon--sm fr-icon-eye-line","aria-hidden":"true"},null,-1))]),_:1})]),_:1},8,["sorted"]),n(D,{onSort:i[4]||(i[4]=f=>l.$emit("sort","followers",f)),sorted:b("followers"),scope:"col"},{default:u(()=>[n(U,null,{tooltip:u(()=>[g(o(e(a)("Favorites")),1)]),default:u(()=>[i[7]||(i[7]=t("span",{class:"fr-icon--sm fr-icon-star-s-line","aria-hidden":"true"},null,-1))]),_:1})]),_:1},8,["sorted"])]),t("tbody",null,[(c(!0),h(B,null,E(l.reuses,f=>(c(),h("tr",null,[t("td",null,[n(ce,null,{default:u(()=>[t("a",{class:"fr-link fr-reset-link",href:d(f)},[n(e(Z),{text:f.title,"auto-resize":!0,"max-lines":2},null,8,["text"])],8,ks)]),_:2},1024)]),t("td",null,[n(ae,{type:r(f).type},{default:u(()=>[g(o(r(f).label),1)]),_:2},1032,["type"])]),t("td",null,o(e(L)(f.created_at)),1),t("td",zs,o(e(j)(f.datasets.length)),1),t("td",As,o(e(j)(f.metrics.discussions)),1),t("td",Cs,o(e(j)(f.metrics.views)),1),t("td",Ss,o(e(j)(f.metrics.followers)),1)]))),256))])]),_:1},8,["loading"]))}}),Rs="/_themes/gouvfr/assets/reuse2.svg",qs={class:"fr-container--fluid"},Ts={key:0},Ms={class:"fr-breadcrumb__link","aria-current":"page"},Bs={class:"fr-h3"},Ps={class:"subtitle subtitle--uppercase"},Os={class:"text-align-center fr-py-1w"},Is=["src"],Fs={class:"fr-text--bold fr-my-3v"},$e=q({__name:"Reuses",props:{oid:{}},setup(_){const{t:s}=M(),a=_,b=k([]),d=k(!1),r=k(1),l=k(10),i=k(0),f=k("created"),z=k("desc"),p=I(()=>"".concat(z.value==="asc"?"":"-").concat(f.value)),{currentOrganization:v}=J(),m=de();function $(y,A){f.value=y,z.value=A}return K(async()=>{d.value=!0,b.value=[];try{let y;if(a.oid)y=await Je(a.oid,r.value,l.value,p.value);else if(m.value)y=await Ze(m.value.id,r.value,l.value,p.value);else return;b.value=y.data,r.value=y.page,l.value=y.page_size,i.value=y.total}finally{d.value=!1}}),(y,A)=>{const w=F("router-link");return c(),h("div",qs,[n(Y,null,{default:u(()=>[t("li",null,[n(w,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(s)("Administration")),1)]),_:1})]),e(v)?(c(),h("li",Ts,[n(w,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(v).name),1)]),_:1})])):R("",!0),t("li",null,[t("a",Ms,o(e(s)("Reuses")),1)])]),_:1}),t("h1",Bs,o(e(s)("Reuses")),1),t("h2",Ps,o(e(s)("{n} reuses of your organization",b.value.length)),1),d.value||i.value>0?(c(),S(Ds,{key:0,reuses:b.value,loading:d.value,sortDirection:z.value,sortedBy:f.value,onSort:$},null,8,["reuses","loading","sortDirection","sortedBy"])):(c(),S(W,{key:1,class:"fr-mt-1w fr-mb-2w"},{default:u(()=>[t("div",Os,[t("img",{src:e(Rs),alt:"",loading:"lazy"},null,8,Is),t("p",Fs,o(e(s)("You haven't published a reuse yet")),1),n(ve,{type:"reuse"})])]),_:1})),i.value>l.value?(c(),S(e(se),{key:2,page:r.value,"page-size":l.value,"total-results":i.value,onChange:A[0]||(A[0]=C=>r.value=C)},null,8,["page","page-size","total-results"])):R("",!0)])}}}),Ls={class:"fr-breadcrumb__link","aria-current":"page"},Us={key:0,class:"fr-h1"},js={class:"fr-alert fr-alert--info"},Hs={class:"fr-alert__title"},Vs={href:"/admin/me/"},Es=q({__name:"Me",setup(_){const{t:s}=M(),a=de();return(b,d)=>{const r=F("router-link");return c(),h("div",null,[n(Y,null,{default:u(()=>[t("li",null,[n(r,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(s)("Administration")),1)]),_:1})]),t("li",null,[t("a",Ls,o(e(s)("Me")),1)])]),_:1}),e(a)?(c(),h("h1",Us,o(e(a).first_name)+" "+o(e(a).last_name),1)):R("",!0),t("div",js,[t("h3",Hs,o(e(s)("This is a WIP page")),1),t("p",null,[t("a",Vs,o(e(s)("You can edit your profil on the current admin.")),1)])])])}}}),we='<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M5 12V18C5 18 5 21 12 21C19 21 19 18 19 18V12" stroke="currentColor" stroke-width="1.5"/>\n<path d="M5 6V12C5 12 5 15 12 15C19 15 19 12 19 12V6" stroke="currentColor" stroke-width="1.5"/>\n<path d="M12 3C19 3 19 6 19 6C19 6 19 9 12 9C5 9 5 6 5 6C5 6 5 3 12 3Z" stroke="currentColor" stroke-width="1.5"/>\n</svg>\n',Ns={class:"fr-sidemenu__item"},Ws=["innerHTML"],Ys=q({__name:"AdminSidebarLink",props:{label:{},icon:{},iconHtml:{},to:{}},setup(_){return(s,a)=>{const b=F("router-link");return c(),h("li",Ns,[t("div",{class:te([{"fr-icon-svg fr-icon--sm":s.iconHtml},"fr-enlarge-link fr-sidemenu__link fr-mb-1w"])},[s.iconHtml?(c(),h("div",{key:0,class:"fr-mr-1w fr-grid-row",innerHTML:s.iconHtml},null,8,Ws)):s.icon?(c(),h("div",{key:1,class:te([s.icon,"fr-mr-1w fr-icon--sm"]),"aria-hidden":"true"},null,2)):R("",!0),n(b,{to:s.to},{default:u(()=>[g(o(s.label),1)]),_:1},8,["to"])],2)])}}});const O=X(Ys,[["__scopeId","data-v-5e2ff0a8"]]),Js=["aria-expanded","aria-controls","aria-current"],Zs={class:"fr-mx-1w"},Ks={class:"logo logo--sm"},Qs={class:"fr-mx-1w fr-col text-overflow-ellipsis"},Xs=["id"],xs={class:"fr-sidemenu__list fr-mx-1w fr-my-3v"},Gs=q({__name:"AdminSidebarMenu",props:{user:{},organization:{},isOpened:{type:Boolean}},emits:["open","click"],setup(_){const s=_,{t:a}=M(),b=N("menu");function d(r,l){const i=document.getElementById(b);l(i)&&(r?l(i).collapse.disclose():l(i).collapse.conceal())}return Pe(()=>{setTimeout(()=>{d(s.isOpened,globalThis.dsfr)},200)}),(r,l)=>(c(),h("li",{class:te(["fr-sidemenu__item",{"fr-sidemenu__item--active":r.isOpened}])},[t("button",{class:"fr-sidemenu__btn","aria-expanded":r.isOpened,"aria-controls":e(b),"aria-current":r.isOpened,onClick:l[0]||(l[0]=i=>r.$emit("open"))},[r.user?(c(),h(B,{key:0},[r.user?(c(),S(e(ie),{key:0,user:r.user,size:24,rounded:!0},null,8,["user"])):R("",!0),t("p",Zs,o(e(a)("My Profil")),1)],64)):r.organization?(c(),h(B,{key:1},[t("div",Ks,[n(Ke,{type:"organization",src:r.organization.logo_thumbnail,size:20},null,8,["src"])]),t("p",Qs,o(r.organization.name),1)],64)):R("",!0)],8,Js),t("div",{class:"fr-collapse","data-fr-js-collapse":"",id:e(b)},[t("ul",xs,[r.user?(c(),h(B,{key:0},[n(O,{icon:"fr-icon-account-circle-line",label:e(a)("Me"),to:{name:"me"}},null,8,["label"]),n(O,{iconHtml:e(we),label:e(a)("Datasets"),to:{name:"me-datasets"}},null,8,["iconHtml","label"]),n(O,{icon:"fr-icon-line-chart-line",label:e(a)("Reuses"),to:{name:"me-reuses"}},null,8,["label"]),n(O,{icon:"fr-icon-git-pull-request-line",label:e(a)("Community Resources"),to:{name:"me-community-resources"}},null,8,["label"])],64)):r.organization?(c(),h(B,{key:1},[n(O,{iconHtml:e(we),label:e(a)("Datasets"),to:{name:"organization-datasets",params:{oid:r.organization.id}},onClick:l[1]||(l[1]=i=>r.$emit("click"))},null,8,["iconHtml","label","to"]),n(O,{icon:"fr-icon-line-chart-line",label:e(a)("Reuses"),to:{name:"organization-reuses",params:{oid:r.organization.id}},onClick:l[2]||(l[2]=i=>r.$emit("click"))},null,8,["label","to"]),n(O,{icon:"fr-icon-chat-3-line",label:e(a)("Discussions"),to:{name:"organization-discussions",params:{oid:r.organization.id}},onClick:l[3]||(l[3]=i=>r.$emit("click"))},null,8,["label","to"]),n(O,{icon:"fr-icon-parent-line",label:e(a)("Members"),to:{name:"organization-members",params:{oid:r.organization.id}},onClick:l[4]||(l[4]=i=>r.$emit("click"))},null,8,["label","to"]),n(O,{icon:"fr-icon-server-line",label:e(a)("Harvesters"),to:{name:"organization-harvesters",params:{oid:r.organization.id}},onClick:l[5]||(l[5]=i=>r.$emit("click"))},null,8,["label","to"]),n(O,{icon:"fr-icon-git-pull-request-line",label:e(a)("Community Resources"),to:{name:"organization-community-resources",params:{oid:r.organization.id}},onClick:l[6]||(l[6]=i=>r.$emit("click"))},null,8,["label","to"]),n(O,{icon:"fr-icon-user-line",label:e(a)("Profile"),to:{name:"organization-profile",params:{oid:r.organization.id}},onClick:l[7]||(l[7]=i=>r.$emit("click"))},null,8,["label","to"])],64)):R("",!0)])],8,Xs)],2))}});const ke=X(Gs,[["__scopeId","data-v-c097b9c2"]]),eo={class:"fr-container--fluid h-100"},to={class:"fr-grid-row h-100 bg-grey-50"},so={class:"fr-col-12 fr-col-md-4 fr-col-lg-3 fr-col-xl-2"},oo=["aria-label"],ao={class:"fr-sidemenu__inner"},no=["aria-controls"],lo=["id"],ro={class:"fr-sidemenu__list"},io={class:"fr-col-12 fr-col-md-8 fr-col-lg-9 fr-col-xl-10 h-100 fr-px-2w"},uo=q({__name:"Admin",setup(_){const{t:s}=M(),a=Qe(),b=N("menu"),d=k(null),r=k(),{setCurrentOrganization:l}=J(),i=Ae();function f(p){return p===r.value}function z(p){r.value=p.id}return le(async()=>{var p,v;if(d.value=await Xe(),a.name||(d.value.organizations.length>0?i.replace({name:"organization-datasets",params:{oid:d.value.organizations[0].id}}):i.replace({name:"me"})),a.name==="me")r.value=(p=Q)==null?void 0:p.id;else if(d.value.organizations.length>0){let m=d.value.organizations[0];a.params.oid&&(m=(v=d.value.organizations.find($=>$.id===a.params.oid))!=null?v:m),z(m),l(m)}}),(p,v)=>{const m=F("router-view");return c(),h("div",eo,[t("div",to,[t("div",so,[t("nav",{class:"fr-sidemenu fr-pr-0","aria-label":e(s)("Administration menu")},[t("div",ao,[t("button",{class:"fr-sidemenu__btn",hidden:"","aria-controls":e(b),"aria-expanded":"false"},o(e(s)("Open menu")),9,no),t("div",{class:"fr-collapse",id:e(b)},[t("ul",ro,[e(Q)?(c(),S(ke,{key:0,user:e(Q),"is-opened":f(e(Q).id),onOpen:v[0]||(v[0]=$=>z(e(Q)))},null,8,["user","is-opened"])):R("",!0),d.value?(c(!0),h(B,{key:1},E(d.value.organizations,$=>(c(),S(ke,{organization:$,"is-opened":f($.id),onOpen:()=>z($),onClick:()=>e(l)($)},null,8,["organization","is-opened","onOpen","onClick"]))),256)):R("",!0)])],8,lo)])],8,oo)]),t("div",io,[(c(),S(m,{key:e(a).fullPath,class:"fr-container--fluid"}))])])])}}});const co=X(uo,[["__scopeId","data-v-1057ebbe"]]),fo=["aria-labelledby","id"],mo={class:"fr-container fr-container--fluid fr-container-md"},_o={class:"fr-grid-row fr-grid-row--center"},po={class:"fr-col-12 fr-col-md-8"},bo={class:"fr-modal__body"},vo={class:"fr-modal__header"},go=["title","aria-controls"],ho={class:"fr-modal__content"},yo=["id"],$o={class:"fr-modal__footer"},wo={class:"fr-btns-group fr-btns-group--right fr-btns-group--sm fr-btns-group--inline-lg fr-btns-group--icon-left"},ko=["disabled"],zo=["disabled"],Ao=q({__name:"AdminAddMemberModal",props:{id:{},oid:{},roles:{}},emits:["memberAdded"],setup(_,{emit:s}){const a=_,b=s,{t:d}=M(),{toast:r}=ue(),l=k(!1),i=k(),f=k("editor"),z=I(()=>"fr-modal-title-user-"+a.id);async function p(){try{l.value=!0,i.value&&(await Ge(a.oid,i.value,f.value),b("memberAdded"),m())}catch($){r.error(d("An error occurred while update member role."))}finally{l.value=!1}}function v($){return $.map(y=>{var w;const A={...y,avatar_thumbnail:(w=y.avatar_url)!=null?w:void 0};return{value:A.id,label:A.first_name+" "+A.last_name,image:et(A,32)}})}function m(){l.value=!1,i.value=void 0,f.value="editor";const $=document.getElementById(a.id);globalThis.dsfr($).modal.conceal()}return($,y)=>(c(),S(re,{to:"body"},[t("dialog",{"aria-labelledby":z.value,role:"dialog",id:$.id,class:"fr-modal"},[t("div",mo,[t("div",_o,[t("div",po,[t("div",bo,[t("div",vo,[t("button",{class:"fr-btn--close fr-btn",title:e(d)("Close the modal dialog"),"aria-controls":$.id},o(e(d)("Close")),9,go)]),t("form",{onSubmit:ne(p,["prevent"])},[t("div",ho,[t("h1",{id:z.value,class:"fr-modal__title fr-mb-2w"},o(e(d)("Add member to the organization")),9,yo),n(xe,{placeholder:$.$t("Search a user"),searchPlaceholder:$.$t("Search a user..."),suggestUrl:"/users/suggest/",values:i.value,onChange:y[0]||(y[0]=A=>i.value=A),allOption:$.$t("Select a user"),addAllOption:!1,onSuggest:v,roundedImages:!0},null,8,["placeholder","searchPlaceholder","values","allOption"]),$.roles.length>0?(c(),S(Ce,{key:0,label:e(d)("Role of the member"),"model-value":f.value,"onUpdate:modelValue":y[1]||(y[1]=A=>f.value=A),options:$.roles},null,8,["label","model-value","options"])):R("",!0)]),t("div",$o,[t("div",wo,[t("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500",type:"button",onClick:m,disabled:l.value},o(e(d)("Cancel")),9,ko),t("button",{class:"fr-btn",type:"submit",disabled:l.value},o(e(d)("Add to the organization")),9,zo)])])],32)])])])])],8,fo)]))}}),Co=["aria-controls"],So=q({__name:"AdminAddMemberButton",props:{oid:{},roles:{}},emits:["memberAdded"],setup(_){const s=_,{t:a}=M(),b=I(()=>"fr-modal-add-user-"+s.oid);return(d,r)=>(c(),h(B,null,[t("button",{class:"fr-btn fr-btn--sm fr-btn--icon-left fr-icon-add-line","data-fr-opened":"false","aria-controls":b.value},o(e(a)("Add member")),9,Co),n(Ao,{id:b.value,oid:d.oid,roles:d.roles,onMemberAdded:r[0]||(r[0]=l=>d.$emit("memberAdded"))},null,8,["id","oid","roles"])],64))}}),Do={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle"},Te=q({__name:"AdminDangerZone",setup(_){return(s,a)=>(c(),S(e(tt),{color:"error",type:"secondary",weight:"regular"},{default:u(()=>[t("div",Do,[H(s.$slots,"default")])]),_:3}))}}),Ro={class:"fr-px-1v rounded-2 monospace fr-text--sm text-mention-grey bg-grey-100 fr-m-0"},Me=q({__name:"AdminEmail",props:{email:{}},setup(_){return(s,a)=>(c(),h("p",Ro,o(s.email),1))}}),qo=["aria-labelledby","id"],To={class:"fr-container fr-container--fluid fr-container-md"},Mo={class:"fr-grid-row fr-grid-row--center"},Bo={class:"fr-col-12 fr-col-md-8"},Po={class:"fr-modal__body"},Oo={class:"fr-modal__header"},Io=["title","aria-controls"],Fo={class:"fr-modal__content"},Lo=["id"],Uo={class:"fr-grid-row fr-grid-row--middle fr-mb-2w"},jo={class:"fr-text--bold fr-m-0 fr-mr-1v"},Ho={class:"fr-col"},Vo={class:"fr-col-auto"},Eo=["disabled"],No={class:"fr-col"},Wo={class:"fr-m-0 text-grey-500"},Yo={class:"fr-m-0 fr-text--xs text-default-error"},Jo={class:"fr-col-auto"},Zo=["disabled"],Ko=q({__name:"AdminEditMemberModal",props:{id:{},member:{},oid:{},roles:{}},emits:["memberUpdated"],setup(_,{emit:s}){const a=_,b=s,d=I(()=>"fr-modal-title-user-"+a.id),{t:r}=M(),{toast:l}=ue(),i=k(!1);async function f(m){if(!m.newRole){v();return}try{i.value=!0,await st(a.oid,m.user.id,m.newRole),b("memberUpdated"),v()}catch($){l.error(r("An error occurred while update member role."))}finally{i.value=!1}}async function z(m){try{i.value=!0,await ot(a.oid,m.user.id),b("memberUpdated")}catch($){l.error(r("An error occurred while removing this member."))}finally{i.value=!1}}function p(m){return a.roles.map($=>{const y={...$};return y.value===m&&(y.selected=!0),y})}function v(){i.value=!1;const m=document.getElementById(a.id);globalThis.dsfr(m).modal.conceal()}return(m,$)=>(c(),S(re,{to:"body"},[t("dialog",{"aria-labelledby":d.value,role:"dialog",id:m.id,class:"fr-modal"},[t("div",To,[t("div",Mo,[t("div",Bo,[t("div",Po,[t("div",Oo,[t("button",{class:"fr-btn--close fr-btn",title:e(r)("Close the modal dialog"),"aria-controls":m.id},o(e(r)("Close")),9,Io)]),t("div",Fo,[t("h1",{id:d.value,class:"fr-modal__title fr-mb-2w"},o(e(r)("Edit member")),9,Lo),t("div",Uo,[n(e(ie),{class:"fr-mr-1v",user:m.member.user,rounded:!0,size:24},null,8,["user"]),t("p",jo,o(m.member.user.first_name)+" "+o(m.member.user.last_name),1),m.member.user.email?(c(),S(Me,{key:0,email:m.member.user.email},null,8,["email"])):R("",!0)]),t("form",{class:"fr-grid-row fr-grid-row--gutters fr-grid-row--bottom",onSubmit:$[1]||($[1]=ne(y=>f(m.member),["prevent"]))},[t("div",Ho,[m.roles.length>0?(c(),S(Ce,{key:0,label:e(r)("Role of the member"),"model-value":m.member.role,"onUpdate:modelValue":$[0]||($[0]=y=>m.member.newRole=y),options:p(m.member.role)},null,8,["label","model-value","options"])):R("",!0)]),t("div",Vo,[t("button",{class:"fr-btn",type:"submit",disabled:i.value},o(e(r)("Validate")),9,Eo)])],32),n(Te,{class:"fr-mt-2w"},{default:u(()=>[t("div",No,[t("p",Wo,o(e(r)("Remove member from the organization")),1),t("p",Yo,o(e(r)("Be careful, this action can't be reverse.")),1)]),t("div",Jo,[t("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary--error fr-btn--icon-left fr-icon-logout-box-r-line",disabled:i.value,onClick:$[2]||($[2]=y=>z(m.member))},o(e(r)("Remove member")),9,Zo)])]),_:1})])])])])])],8,qo)]))}}),Qo=["aria-controls"],Xo=q({__name:"AdminEditMemberButton",props:{member:{},oid:{},roles:{}},emits:["memberUpdated"],setup(_){const s=_,{t:a}=M(),b=I(()=>"fr-modal-user-"+s.member.user.id);return(d,r)=>(c(),h(B,null,[t("button",{class:"fr-btn fr-btn--sm fr-btn--secondary-grey-500 fr-btn--tertiary-no-outline fr-icon-pencil-line","data-fr-opened":"false","aria-controls":b.value},o(e(a)("Edit")),9,Qo),n(Ko,{id:b.value,member:d.member,oid:d.oid,roles:d.roles,onMemberUpdated:r[0]||(r[0]=l=>d.$emit("memberUpdated"))},null,8,["id","member","oid","roles"])],64))}}),xo={class:"fr-mt-n9v fr-mb-2w"},Go={class:"fr-badge fr-badge--info fr-badge--no-icon"},ea={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle"},ta={class:"fr-col"},sa={class:"fr-grid-row fr-grid-row--middle"},oa={class:"fr-text--bold fr-m-0 fr-mr-1v"},aa={class:"fr-m-0"},na={class:"fr-ml-3v fr-mt-1-5v fr-mb-0 filet filet-default-grey fr-text--sm"},la={key:0,class:"fr-col-auto fr-grid-row flex-direction-column"},ra=["disabled"],ia=["disabled","aria-controls"],da=["aria-labelledby","id"],ua={class:"fr-container fr-container--fluid fr-container-md"},ca={class:"fr-grid-row fr-grid-row--center"},fa={class:"fr-col-12 fr-col-md-8"},ma={class:"fr-modal__body"},_a={class:"fr-modal__header"},pa=["title","aria-controls"],ba={class:"fr-modal__content"},va=["id"],ga={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--right"},ha={class:"fr-col-auto"},ya=["disabled"],$a={class:"fr-col-auto"},wa=["disabled"],ka=q({__name:"AdminMembershipRequest",props:{loading:{type:Boolean},oid:{},request:{},showActions:{type:Boolean}},emits:["accept","refuse"],setup(_,{emit:s}){const a=_,b=s,{t:d}=M(),r=k(""),l=N("modal"),i=N("modalTitle");function f(){const v=document.getElementById(l);globalThis.dsfr(v).modal.conceal()}function z(){b("refuse",a.request.id,r.value),f()}function p(){r.value="",f()}return(v,m)=>{const $=F("AdminMembershipRequest",!0);return c(),S(W,{class:"drop-shadow rounded-xxs fr-mt-3w"},{default:u(()=>[t("div",xo,[t("p",Go,[m[2]||(m[2]=t("span",{class:"fr-icon-user-add-line fr-icon--sm","aria-hidden":"true"},null,-1)),g(" "+o(e(d)("Membership Request")),1)])]),t("div",ea,[t("div",ta,[t("div",sa,[n(e(ie),{class:"fr-mr-1v",user:v.request.user,rounded:!0,size:24},null,8,["user"]),t("p",oa,o(v.request.user.first_name)+" "+o(v.request.user.last_name),1),v.request.user.email?(c(),S(Me,{key:0,email:v.request.user.email,class:"fr-mr-1v"},null,8,["email"])):R("",!0),t("p",aa,o(e(d)("asks to join the organization.")),1)]),t("div",na,o(v.request.comment),1)]),v.showActions?(c(),h("div",la,[t("button",{class:"fr-btn fr-btn--sm fr-btn--icon-left fr-mb-1w fr-icon-check-line",onClick:m[0]||(m[0]=y=>v.$emit("accept",v.request.id)),disabled:v.loading,"data-testid":"accept"},o(e(d)("Accept request")),9,ra),t("button",{class:"fr-btn fr-btn--icon-left fr-btn--sm fr-btn--secondary fr-btn--secondary--error fr-icon-close-line",disabled:v.loading,"data-fr-opened":"false","aria-controls":e(l),"data-testid":"refuse"},o(e(d)("Refuse")),9,ia),(c(),S(re,{to:"body"},[t("dialog",{"aria-labelledby":e(i),role:"dialog",id:e(l),class:"fr-modal","data-testid":"modal"},[t("div",ua,[t("div",ca,[t("div",fa,[t("div",ma,[t("div",_a,[t("button",{class:"fr-btn--close fr-btn",title:e(d)("Close the modal dialog"),"aria-controls":e(l),onClick:ne(p,["prevent"])},o(e(d)("Close")),9,pa)]),t("div",ba,[t("h1",{id:e(i),class:"fr-modal__title fr-mb-2w"},o(e(d)("Refuse membership request")),9,va),n($,{class:"fr-mt-4w fr-mb-2w",loading:!1,oid:v.oid,request:v.request,"show-actions":!1},null,8,["oid","request"]),t("form",{onSubmit:ne(z,["prevent"]),onReset:p},[n(at,{label:e(d)("You can provide the refusal reason:"),modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=y=>r.value=y),"data-testid":"comment-group"},null,8,["label","modelValue"]),t("div",ga,[t("div",ha,[t("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500",type:"reset",disabled:v.loading,"data-testid":"cancel-modal-button"},o(e(d)("Cancel")),9,ya)]),t("div",$a,[t("button",{class:"fr-btn",type:"submit",disabled:v.loading,"data-testid":"refuse-modal-button"},o(e(d)("Refuse request")),9,wa)])])],32)])])])])])],8,da)]))])):R("",!0)])]),_:1})}}}),za={key:0},Aa={class:"fr-breadcrumb__link","aria-current":"page"},Ca={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle justify-center"},Sa={class:"fr-col-12 fr-col-md"},Da={class:"fr-h3 fr-mb-5v"},Ra={key:0,class:"fr-col-auto"},qa={class:"subtitle subtitle--uppercase fr-m-0"},Ta={class:"subtitle subtitle--uppercase fr-mt-2w fr-mb-1v"},Ma={class:"fr-table fr-table--layout-fixed"},Ba={class:"fr-text--bold fr-m-0"},Pa={class:"fr-m-0 fr-text--xs text-mention-grey f-italic"},Oa={key:0},Ia={key:1},Fa={key:0},La=q({__name:"Members",props:{oid:{}},setup(_){const s=_;_e(nt);const{t:a}=M(),{toast:b}=ue(),d=k([]),r=I(()=>lt||f.value.some(w=>{var C;return w.user.id===((C=Q)==null?void 0:C.id)&&w.role==="admin"})),l=k([]),{currentOrganization:i}=J(),f=k([]),z=k(!1);function p(w){var C,T;return(T=(C=l.value.find(P=>P.value===w))==null?void 0:C.label)!=null?T:w}function v(w){return w==="admin"?"info":"default"}async function m(){z.value=!0,f.value=[];try{const w=await Se(s.oid);f.value=w.members}finally{z.value=!1}}async function $(){const w=await ge(s.oid);d.value=w}async function y(w){z.value=!0;const C=[];try{await ut(s.oid,w),C.push($()),C.push(m())}catch(T){b.error(a("An error occurred while accepting this membership."))}finally{Promise.all(C).finally(()=>z.value=!1)}}async function A(w,C){z.value=!0;const T=[];try{await ct(s.oid,w,C),T.push($()),T.push(m())}catch(P){b.error(a("An error occurred while refusing this membership."))}finally{Promise.all(T).finally(()=>z.value=!1)}}return K(()=>{r.value&&ge(s.oid).then(w=>d.value=w)}),le(()=>{rt().then(it).then(w=>l.value=w),m()}),(w,C)=>{const T=F("router-link");return c(),h("div",null,[n(Y,null,{default:u(()=>[t("li",null,[n(T,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(a)("Administration")),1)]),_:1})]),e(i)?(c(),h("li",za,[n(T,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(i).name),1)]),_:1})])):R("",!0),t("li",null,[t("a",Aa,o(e(a)("Members")),1)])]),_:1}),t("div",Ca,[t("div",Sa,[t("h1",Da,o(e(a)("Members")),1)]),r.value?(c(),h("div",Ra,[n(So,{oid:w.oid,roles:l.value,onMemberAdded:m},null,8,["oid","roles"])])):R("",!0)]),d.value.length?(c(),h(B,{key:0},[t("h2",qa,o(e(a)("{n} requests",{n:d.value.length})),1),(c(!0),h(B,null,E(d.value,P=>(c(),S(ka,{class:"fr-mb-4w",key:P.id,loading:z.value,oid:w.oid,request:P,"show-actions":!0,onAccept:y,onRefuse:A},null,8,["loading","oid","request"]))),128))],64)):R("",!0),t("h2",Ta,o(e(a)("{n} members",{n:f.value.length})),1),t("div",Ma,[n(G,{loading:z.value},{default:u(()=>[t("thead",null,[t("tr",null,[n(D,{scope:"col"},{default:u(()=>[g(o(e(a)("Members")),1)]),_:1}),n(D,{scope:"col"},{default:u(()=>[g(o(e(a)("Status")),1)]),_:1}),n(D,{scope:"col"},{default:u(()=>[g(o(e(a)("Member since")),1)]),_:1}),n(D,{scope:"col"},{default:u(()=>[g(o(e(a)("Last connection")),1)]),_:1}),r.value?(c(),S(D,{key:0,scope:"col"},{default:u(()=>[g(o(e(a)("Action")),1)]),_:1})):R("",!0)])]),t("tbody",null,[(c(!0),h(B,null,E(f.value,P=>(c(),h("tr",{key:P.user.id},[t("td",null,[t("p",Ba,o(P.user.first_name)+" "+o(P.user.last_name),1),t("p",Pa,[n(e(pe),{height:11,width:11,name:"ri-mail-line"}),g(" "+o(P.user.email),1)])]),t("td",null,[n(ae,{type:v(P.role)},{default:u(()=>[g(o(p(P.role)),1)]),_:2},1032,["type"])]),t("td",null,o(e(L)(P.since)),1),t("td",null,[P.user.last_login_at?(c(),h("span",Oa,o(e(dt)(P.user.last_login_at)),1)):(c(),h("span",Ia,o(e(a)("No connection")),1))]),r.value?(c(),h("td",Fa,[n(Xo,{member:P,oid:w.oid,roles:l.value,onMemberUpdated:m},null,8,["member","oid","roles"])])):R("",!0)]))),128))])]),_:1},8,["loading"])])])}}}),Ua={class:"fr-container--fluid"},ja={key:0},Ha={class:"fr-breadcrumb__link","aria-current":"page"},Va={class:"fr-h3 fr-mb-5v"},Ea={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle justify-between"},Na={class:"fr-col-12 fr-col-md fr-grid-row fr-grid-row--middle"},Wa={class:"fr-ml-3v fr-my-0 fr-h3"},Ya=["title"],Ja={class:"fr-col-auto"},Za=["href"],Ka=["id"],Qa=["disabled","onClick"],Xa={class:"fr-col"},xa={class:"fr-m-0 text-grey-500"},Ga={class:"fr-m-0 fr-text--xs text-default-error"},en={class:"fr-col-auto"},tn=["disabled","aria-controls"],sn=["aria-labelledby","id"],on={class:"fr-container fr-container--fluid fr-container-md"},an={class:"fr-grid-row fr-grid-row--center"},nn={class:"fr-col-12 fr-col-md-8"},ln={class:"fr-modal__body"},rn={class:"fr-modal__header"},dn=["title","aria-controls"],un={class:"fr-modal__content"},cn=["id"],fn={class:"fr-text--bold"},mn={class:"fr-modal__footer"},_n={class:"fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-lg fr-btns-group--icon-left"},pn=["disabled"],bn=q({__name:"Profile",props:{oid:{}},setup(_){const{t:s}=M(),{toast:a}=ue(),b=_,d=Ae(),r=k(null),{currentOrganization:l}=J(),i=k(null),{organizationCertified:f}=ft(i),z=k([]),p=k(!1),v=N("modal"),m=N("modalTitle");function $(){l.value&&(p.value=!0,pt(l.value.id).then(()=>{d.replace("/"),window.location.reload()}).catch(()=>a.error(s("An error occured when deleting the organization."))).finally(()=>p.value=!1))}async function y(A,w){p.value=!0;try{i.value=await bt(A),a.success(s("Organization updated !"))}catch(C){a.error(s("An error occured when updating the organization."))}finally{p.value=!1}if(w&&i.value){p.value=!0;try{const C=await vt(i.value.id,w);i.value.logo_thumbnail=C.image}catch(C){a.error(s("Failed to upload logo, you can upload it again in your management panel"))}finally{p.value=!1}}}return le(async()=>{p.value=!0;try{i.value=await Se(b.oid)}finally{p.value=!1}}),(A,w)=>{const C=F("router-link");return c(),h("div",Ua,[n(Y,null,{default:u(()=>[t("li",null,[n(C,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(s)("Administration")),1)]),_:1})]),e(l)?(c(),h("li",ja,[n(C,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(l).name),1)]),_:1})])):R("",!0),t("li",null,[t("a",Ha,o(e(s)("Profile")),1)])]),_:1}),t("h1",Va,o(e(s)("Profile")),1),i.value?(c(),S(W,{key:0,class:"fr-mb-5v"},{default:u(()=>[t("div",Ea,[t("div",Na,[n(e(mt),{src:i.value.logo,type:"organization",size:80,class:"rounded-xxs border"},null,8,["src"]),t("div",Wa,[g(o(i.value.name)+" ",1),e(f)?(c(),h("span",{key:0,class:"fr-icon-success-line fr-icon--lg text-blue-400",title:e(s)("The identity of this public service is certified by {certifier}",{certifier:e(be)}),"aria-hidden":"true"},null,8,Ya)):R("",!0)])]),t("div",Ja,[t("a",{href:i.value.page,class:"fr-btn fr-btn--sm fr-btn--secondary fr-btn--secondary-grey-500 fr-btn--icon-left fr-icon-eye-line"},o(e(s)("See the organization page")),9,Za)])])]),_:1})):R("",!0),r.value?(c(),h("h2",{key:1,class:"subtitle subtitle--uppercase fr-mb-5v",id:r.value.legend},o(e(s)("Edit profile")),9,Ka)):R("",!0),p.value&&!i.value?(c(),S(qe,{key:2})):R("",!0),i.value?(c(),S(_t,{key:3,organization:i.value,errors:z.value,showLegend:!1,showWell:!1,ref_key:"form",ref:r,onSubmit:y},{submitButton:u(({submit:T})=>[t("button",{class:"fr-btn fr-btn--icon-left fr-icon-save-line",disabled:p.value,"data-testid":"submitButton",onClick:T},o(e(s)("Save")),9,Qa)]),default:u(()=>[n(Te,{class:"fr-mt-6w"},{default:u(()=>[t("div",Xa,[t("p",xa,o(e(s)("Delete the organization")),1),t("p",Ga,o(e(s)("Be careful, this action can't be reverse.")),1)]),t("div",en,[t("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary--error fr-btn--icon-left fr-icon-delete-line",disabled:p.value,"data-fr-opened":"false","aria-controls":e(v)},o(e(s)("Delete")),9,tn),(c(),S(re,{to:"body"},[t("dialog",{"aria-labelledby":e(m),role:"dialog",id:e(v),class:"fr-modal"},[t("div",on,[t("div",an,[t("div",nn,[t("div",ln,[t("div",rn,[t("button",{class:"fr-btn--close fr-btn",title:e(s)("Close the modal dialog"),"aria-controls":e(v)},o(e(s)("Close")),9,dn)]),t("div",un,[t("h1",{id:e(m),class:"fr-modal__title fr-mb-2w"},o(e(s)("Are you sure you want to delete this organization ?")),9,cn),t("p",fn,o(e(s)("This action can't be reverse.")),1),t("p",null,o(e(s)("All content published with this organization will stay online, with the same URL but in an anonymous form, i.e. without being linked to a data producer.")),1),t("p",null,o(e(s)("If you want to delete your published content too, start by deleting the contents before deleting your account.")),1)]),t("div",mn,[t("div",_n,[t("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary--error",role:"button",disabled:p.value,onClick:$},o(e(s)("Delete")),9,pn)])])])])])])],8,sn)]))])]),_:1})]),_:1},8,["organization","errors"])):R("",!0)])}}});async function vn(_){return(await oe.get("posts/".concat(_,"/"))).data}async function gn(_){return(await oe.get("dataservices/".concat(_,"/"))).data}_e($t,yt,ht,gt);async function hn(_,s,a,b){return(await oe.get(De("discussions/"),{params:{org:_,sort:b,page_size:a,page:s}})).data}async function yn(_){switch(_.class){case"Dataservice":return gn(_.id);case"Dataset":return kt(_.id);case"Post":return vn(_.id);case"Reuse":return wt(_.id);default:return null}}function $n(_,s){return _===null?null:{title:wn(_),icon:zn(s),page:kn(_)}}function wn(_){return _===null?"":"title"in _?_.title:"headline"in _?_.headline:Re(_,"Unknown type ".concat(_))}function kn(_){return _===null?"":"page"in _?_.page:"self_web_url"in _?_.self_web_url:Re(_,"Unknown type ".concat(_))}function zn(_){switch(_){case"Dataservice":return"ri-terminal-line";case"Dataset":return"ri-database-2-line";case"Post":return"ri-article-line";case"Reuse":return"ri-line-chart-line";default:return""}}const An={class:"fr-text--bold"},Cn={key:0},Sn=["href"],Dn={class:"inline-flex"},Rn=["href"],qn=q({__name:"AdminDiscussionsTable",props:{discussions:{},loading:{type:Boolean},sortDirection:{},sortedBy:{}},emits:["sort"],setup(_){const s=_,{t:a}=M(),b=k({}),d=k({});K(async()=>{for(const f of s.discussions)if(!(f.subject.id in b.value)){const z=yn(f.subject);b.value[f.subject.id]=z;const p=await b.value[f.subject.id];d.value[f.subject.id]=$n(p,f.subject.class)}});function r(f,z){return z?z.page+"#/discussions/"+f:""}function l(f){return s.sortedBy===f?s.sortDirection:null}function i(f){return f.discussion.slice(-1)[0]}return(f,z)=>(c(),S(G,{class:"fr-table--layout-fixed",loading:f.loading},{default:u(()=>[t("thead",null,[n(D,{onSort:z[0]||(z[0]=p=>f.$emit("sort","title",p)),sorted:l("title"),scope:"col"},{default:u(()=>[g(o(e(a)("Discussion")),1)]),_:1},8,["sorted"]),n(D,{scope:"col"},{default:u(()=>[g(o(e(a)("Number of comments")),1)]),_:1}),n(D,{scope:"col"},{default:u(()=>[g(o(e(a)("Last comment")),1)]),_:1}),n(D,{onSort:z[1]||(z[1]=p=>f.$emit("sort","closed",p)),sorted:l("closed"),scope:"col"},{default:u(()=>[g(o(e(a)("Closed at")),1)]),_:1},8,["sorted"]),n(D,{scope:"col",style:{width:"25%"}},{default:u(()=>[g(o(e(a)("URL")),1)]),_:1})]),t("tbody",null,[(c(!0),h(B,null,E(f.discussions,p=>{var v,m,$;return c(),h("tr",null,[t("td",null,[t("p",An,[n(e(Z),{text:p.title,"auto-resize":!0,"max-lines":1},null,8,["text"])]),d.value[p.subject.id]?(c(),h("p",Cn,[t("a",{class:"fr-link inline-flex",href:(v=d.value[p.subject.id])==null?void 0:v.page},[n(e(pe),{height:12,class:"self-center",name:(m=d.value[p.subject.id])==null?void 0:m.icon},null,8,["name"]),n(e(Z),{class:"overflow-wrap-anywhere",text:($=d.value[p.subject.id])==null?void 0:$.title,"auto-resize":!0,"max-lines":1},null,8,["text"])],8,Sn)])):R("",!0)]),t("td",null,o(p.discussion.length),1),t("td",null,[t("div",null,[t("p",null,o(e(L)(i(p).posted_on)),1),t("p",Dn,[g(o(e(a)("by "))+" ",1),n(e(Lt),{class:"fr-ml-1v",user:i(p).posted_by},null,8,["user"])])])]),t("td",null,[p.closed?(c(),h(B,{key:0},[g(o(e(L)(p.closed)),1)],64)):R("",!0)]),t("td",null,[d.value[p.subject.id]?(c(),h("a",{key:0,class:"fr-link inline-flex",href:r(p.id,d.value[p.subject.id]),target:"_blank"},[n(e(Z),{text:r(p.id,d.value[p.subject.id]),"auto-resize":!0,"max-lines":1},null,8,["text"])],8,Rn)):R("",!0)])])}),256))])]),_:1},8,["loading"]))}}),Tn="/_themes/gouvfr/assets/discussion.svg",Mn={class:"fr-container--fluid"},Bn={key:0},Pn={class:"fr-breadcrumb__link","aria-current":"page"},On={class:"fr-h3"},In={class:"subtitle subtitle--uppercase"},Fn={class:"text-align-center fr-py-1w"},Ln=["src"],Un={class:"fr-text--bold fr-my-3v"},jn=q({__name:"Discussions",props:{oid:{}},setup(_){const{t:s}=M(),a=_,b=k(!1),d=k(1),r=k(10),l=k(0),i=k("created"),f=k("desc"),z=I(()=>"".concat(f.value==="asc"?"":"-").concat(i.value)),p=k([]),{currentOrganization:v}=J();function m($,y){i.value=$,f.value=y}return K(async()=>{b.value=!0,p.value=[];try{const $=await hn(a.oid,d.value,r.value,z.value);p.value=$.data,d.value=$.page,r.value=$.page_size,l.value=$.total}finally{b.value=!1}}),($,y)=>{const A=F("router-link");return c(),h("div",Mn,[n(Y,null,{default:u(()=>[t("li",null,[n(A,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(s)("Administration")),1)]),_:1})]),e(v)?(c(),h("li",Bn,[n(A,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(v).name),1)]),_:1})])):R("",!0),t("li",null,[t("a",Pn,o(e(s)("Discussions")),1)])]),_:1}),t("h1",On,o(e(s)("Discussions")),1),t("h2",In,o(e(s)("{n} discussions",l.value)),1),b.value||l.value>0?(c(),S(qn,{key:0,discussions:p.value,loading:b.value,"sort-direction":f.value,sortedBy:i.value,onSort:m},null,8,["discussions","loading","sort-direction","sortedBy"])):(c(),S(W,{key:1,class:"fr-my-2w"},{default:u(()=>[t("div",Fn,[t("img",{src:e(Tn),alt:"",loading:"lazy"},null,8,Ln),t("p",Un,o(e(s)("There is no discussion yet")),1)])]),_:1})),l.value>r.value?(c(),S(e(se),{key:2,page:d.value,"page-size":r.value,"total-results":l.value,onChange:y[0]||(y[0]=w=>d.value=w)},null,8,["page","page-size","total-results"])):R("",!0)])}}});async function Hn(_,s,a){return(await oe.get(De("harvest/sources/"),{params:{owner:_,deleted:!0,page:s,page_size:a}})).data}const Vn="/_themes/gouvfr/assets/harvester.svg",En={class:"fr-container--fluid"},Nn={key:0},Wn={class:"fr-breadcrumb__link","aria-current":"page"},Yn={class:"fr-h3"},Jn={class:"subtitle subtitle--uppercase"},Zn=["href"],Kn={class:"text-align-center fr-py-1w"},Qn=["src"],Xn={class:"fr-text--bold fr-my-3v"},xn=q({__name:"Harvesters",props:{oid:{}},setup(_){const{t:s}=M(),a=_,b=k(!1),d=k(1),r=k(10),l=k(0),i=k([]),f=k({}),{currentOrganization:z}=J();function p(y){return"".concat(x,"harvester/").concat(y.id,"/")}function v(y){return y.last_job?f.value[y.last_job.id].items.filter(A=>A.dataservice).length:0}function m(y){return y.last_job?f.value[y.last_job.id].items.filter(A=>A.dataset).length:0}function $(y){var A;switch((A=y.last_job)==null?void 0:A.status){case"pending":return{label:s("Pending"),type:"default"};case"initializing":return{label:s("Initializing"),type:"info"};case"initialized":return{label:s("Initialized"),type:"default"};case"processing":return{label:s("Processing"),type:"info"};case"done":return{label:s("Done"),type:"success"};case"done-errors":return{label:s("Done with errors"),type:"warning"};case"failed":return{label:s("Failed"),type:"error"};default:return{label:s("No job yet"),type:"default"}}}return K(async()=>{var y;b.value=!0,i.value=[];try{const A=await Hn(a.oid,d.value,r.value);i.value=A.data,d.value=A.page,r.value=A.page_size,l.value=A.total;const w=[];for(const T of i.value)(y=T.last_job)!=null&&y.id&&w.push(oe.get("harvest/job/".concat(T.last_job.id,"/")));const C=await Promise.allSettled(w);for(const T of C)T.status==="fulfilled"&&(console.log(T.value.data),f.value[T.value.data.id]=T.value.data)}finally{b.value=!1}}),(y,A)=>{const w=F("router-link");return c(),h("div",En,[n(Y,null,{default:u(()=>[t("li",null,[n(w,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(s)("Administration")),1)]),_:1})]),e(z)?(c(),h("li",Nn,[n(w,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(z).name),1)]),_:1})])):R("",!0),t("li",null,[t("a",Wn,o(e(s)("Harvesters")),1)])]),_:1}),t("h1",Yn,o(e(s)("Harvesters")),1),t("h2",Jn,o(e(s)("{n} harvesters",l.value)),1),b.value||l.value?(c(),S(G,{key:0,loading:b.value},{default:u(()=>[t("thead",null,[n(D,{scope:"col"},{default:u(()=>[g(o(e(s)("Name")),1)]),_:1}),n(D,{scope:"col"},{default:u(()=>[g(o(e(s)("Status")),1)]),_:1}),n(D,{scope:"col"},{default:u(()=>[g(o(e(s)("Created at")),1)]),_:1}),n(D,{scope:"col"},{default:u(()=>[g(o(e(s)("Last run")),1)]),_:1}),n(D,{scope:"col"},{default:u(()=>[g(o(e(s)("Datasets")),1)]),_:1}),n(D,{scope:"col"},{default:u(()=>[g(o(e(s)("Dataservices")),1)]),_:1})]),t("tbody",null,[(c(!0),h(B,null,E(i.value,C=>{var T;return c(),h("tr",null,[t("td",null,[n(ce,null,{default:u(()=>[t("a",{class:"fr-link fr-reset-link",href:p(C)},[n(e(Z),{text:C.name,"auto-resize":!0,"max-lines":2},null,8,["text"])],8,Zn)]),_:2},1024)]),t("td",null,[n(ae,{type:$(C).type},{default:u(()=>[g(o($(C).label),1)]),_:2},1032,["type"])]),t("td",null,o(e(L)(C.created_at)),1),t("td",null,[(T=C.last_job)!=null&&T.ended?(c(),h(B,{key:0},[g(o(e(L)(C.last_job.ended)),1)],64)):(c(),h(B,{key:1},[g(o(e(s)("Not yet")),1)],64))]),t("td",null,o(m(C)),1),t("td",null,o(v(C)),1)])}),256))])]),_:1},8,["loading"])):(c(),S(W,{key:1,class:"fr-my-2w"},{default:u(()=>[t("div",Kn,[t("img",{src:e(Vn),alt:"",loading:"lazy"},null,8,Qn),t("p",Xn,o(e(s)("There is no harvesters yet")),1),n(ve,{type:"harvester"})])]),_:1})),l.value>r.value?(c(),S(e(se),{key:2,page:d.value,"page-size":r.value,"total-results":l.value,onChange:A[0]||(A[0]=C=>d.value=C)},null,8,["page","page-size","total-results"])):R("",!0)])}}}),Gn=["href"],el={class:"fr-p-1v monospaced bg-grey-100 fr-text--sm text-mention-grey rounded-xxs"},tl=q({__name:"AdminCommunityResourcesTable",props:{communityResources:{},loading:{type:Boolean},sortedBy:{},sortDirection:{}},emits:["sort"],setup(_){const s=_,{t:a}=M();function b(l){return s.sortedBy===l?s.sortDirection:null}function d(l){return"".concat(x,"dataset/").concat(l.dataset.id,"/community-resource/").concat(l.id,"/")}function r(l){const i=l.extras&&"check:available"in l.extras;return i&&l.extras["check:available"]===!1?{label:a("Unavailable"),type:"error"}:i?{label:a("Available"),type:"info"}:{label:a("Not checked yet"),type:"default"}}return(l,i)=>(c(),S(G,{loading:l.loading},{default:u(()=>[t("thead",null,[n(D,{onSort:i[0]||(i[0]=f=>l.$emit("sort","title",f)),sorted:b("title"),scope:"col"},{default:u(()=>[g(o(e(a)("Resource title")),1)]),_:1},8,["sorted"]),n(D,null,{default:u(()=>[g(o(e(a)("Status")),1)]),_:1}),n(D,null,{default:u(()=>[g(o(e(a)("Format")),1)]),_:1}),n(D,{onSort:i[1]||(i[1]=f=>l.$emit("sort","created_at_internal",f)),sorted:b("created_at_internal"),scope:"col"},{default:u(()=>[g(o(e(a)("Created at")),1)]),_:1},8,["sorted"]),n(D,{onSort:i[2]||(i[2]=f=>l.$emit("sort","last_modified_internal",f)),sorted:b("last_modified_internal"),scope:"col"},{default:u(()=>[g(o(e(a)("Modified at")),1)]),_:1},8,["sorted"])]),t("tbody",null,[(c(!0),h(B,null,E(l.communityResources,f=>(c(),h("tr",null,[t("td",null,[n(ce,null,{default:u(()=>[t("a",{class:"fr-link fr-reset-link",href:d(f)},[n(e(Z),{text:f.title,"auto-resize":!0,"max-lines":2},null,8,["text"])],8,Gn)]),_:2},1024)]),t("td",null,[n(ae,{type:r(f).type},{default:u(()=>[g(o(r(f).label),1)]),_:2},1032,["type"])]),t("td",null,[t("code",el,o(f.format),1)]),t("td",null,o(e(L)(f.created_at)),1),t("td",null,o(e(L)(f.last_modified)),1)]))),256))])]),_:1},8,["loading"]))}}),sl={class:"fr-container--fluid"},ol={key:0},al={class:"fr-breadcrumb__link","aria-current":"page"},nl={class:"fr-h3"},ll={class:"subtitle subtitle--uppercase"},rl={class:"text-align-center fr-py-1w"},il=["src"],dl={class:"fr-text--bold fr-my-3v"},ze=q({__name:"CommunityResources",props:{oid:{}},setup(_){const{t:s}=M(),a=_,b=k([]),d=k(!1),r=k(1),l=k(10),i=k(0),f=k("created_at_internal"),z=k("desc"),p=I(()=>"".concat(z.value==="asc"?"":"-").concat(f.value)),{currentOrganization:v}=J(),m=de();function $(y,A){f.value=y,z.value=A}return K(async()=>{d.value=!0,b.value=[];try{let y;if(a.oid)y=await zt(a.oid,r.value,l.value,p.value);else if(m.value)y=await At(m.value.id,r.value,l.value,p.value);else return;b.value=y.data,r.value=y.page,l.value=y.page_size,i.value=y.total}finally{d.value=!1}}),(y,A)=>{const w=F("router-link");return c(),h("div",sl,[n(Y,null,{default:u(()=>[t("li",null,[n(w,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(s)("Administration")),1)]),_:1})]),e(v)?(c(),h("li",ol,[n(w,{class:"fr-breadcrumb__link",to:"/"},{default:u(()=>[g(o(e(v).name),1)]),_:1})])):R("",!0),t("li",null,[t("a",al,o(e(s)("Community Resources")),1)])]),_:1}),t("h1",nl,o(e(s)("Community Resources")),1),t("h2",ll,o(e(s)("{n} community resources",b.value.length)),1),d.value||i.value>0?(c(),S(tl,{key:0,"community-resources":b.value,loading:d.value,sortDirection:z.value,sortedBy:f.value,onSort:$},null,8,["community-resources","loading","sortDirection","sortedBy"])):(c(),S(W,{key:1,class:"fr-mt-1w fr-mb-2w"},{default:u(()=>[t("div",rl,[t("img",{src:e(Ct),alt:"",loading:"lazy"},null,8,il),t("p",dl,o(e(s)("You haven't published a community resource yet")),1)])]),_:1})),i.value>l.value?(c(),S(e(se),{key:2,page:r.value,"page-size":l.value,"total-results":i.value,onChange:A[0]||(A[0]=C=>r.value=C)},null,8,["page","page-size","total-results"])):R("",!0)])}}});St({admin_root:x,default_lang:fe.global.locale.value,only_locales:fe.global.locale.value,schema_documentation_url:Dt,schema_validata_url:Rt,show_copy_resource_permalink:!0,tabular_api_url:qt,tabular_page_size:Tt,title:be});const ul=[{path:"/me",children:[{path:"",component:Es,name:"me"},{path:"datasets",component:ye,name:"me-datasets"},{path:"reuses",component:$e,name:"me-reuses"},{path:"community-resources",component:ze,name:"me-community-resources"}]},{path:"/organizations/:oid",children:[{path:"datasets",component:ye,props:!0,name:"organization-datasets"},{path:"reuses",component:$e,props:!0,name:"organization-reuses"},{path:"discussions",component:jn,props:!0,name:"organization-discussions"},{path:"members",component:La,props:!0,name:"organization-members"},{path:"harvesters",component:xn,props:!0,name:"organization-harvesters"},{path:"community-resources",component:ze,props:!0,name:"organization-community-resources"},{path:"profile",component:bn,props:!0,name:"organization-profile"}]}],cl=Mt({history:Bt(),routes:ul}),ee=Oe(co);Pt(ee);ee.use(Ot);ee.use(It);ee.use(fe);ee.use(cl);ee.mount("#admin");globalThis.dsfr.start();console.log("JS is injected !");export{fl as __vite_legacy_guard};
